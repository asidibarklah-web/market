<!DOCTYPE html>
<html>
<head>
  <title>Oubrou Market Test</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<h1>Oubrou Market</h1>
<button onclick="addProduct()">Add Test Product</button>
<ul id="list"></ul>

<script>
const supabase = window.supabase.createClient(
  "https://qzozwhxbzmldevbwdpep.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF6b3p3aHhiem1sZGV2YndkcGVwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4OTM5MzgsImV4cCI6MjA4MzQ2OTkzOH0.3ze6Wi1soRWTjLMiZBdG9gNUtX0_LORzlwmJctntJyQ"
);

async function load() {
  const { data, error } = await supabase.from("products").select("*");
  if (error) {
    alert("ERROR: " + error.message);
    return;
  }
  list.innerHTML = "";
  data.forEach(p => {
    list.innerHTML += `<li>${p.name} - ${p.price}</li>`;
  });
}

async function addProduct() {
  const { error } = await supabase.from("products").insert([
    { name: "Apple", price: 2, image: "" }
  ]);
  if (error) {
    alert("SAVE ERROR: " + error.message);
    return;
  }
  load();
}

load();
</script>

</body>
</html>
